import{Y as C,af as w,ag as D,a2 as P,a4 as T}from"./singletons-834fc638.js";function A(t){return Object.prototype.toString.call(t)==="[object Date]"}function j(t,n,e,i){if(typeof e=="number"||A(e)){const r=i-e,s=(e-n)/(t.dt||1/60),o=t.opts.stiffness*r,f=t.opts.damping*s,p=(o-f)*t.inv_mass,a=(s+p)*t.dt;return Math.abs(a)<t.opts.precision&&Math.abs(r)<t.opts.precision?i:(t.settled=!1,A(e)?new Date(e.getTime()+a):e+a)}else{if(Array.isArray(e))return e.map((r,s)=>j(t,n[s],e[s],i[s]));if(typeof e=="object"){const r={};for(const s in e)r[s]=j(t,n[s],e[s],i[s]);return r}else throw new Error(`Cannot spring ${typeof e} values`)}}function S(t,n={}){const e=C(t),{stiffness:i=.15,damping:r=.8,precision:s=.01}=n;let o,f,p,a=t,y=t,c=1,h=0,g=!1;function b(m,l={}){y=m;const M=p={};if(t==null||l.hard||d.stiffness>=1&&d.damping>=1)return g=!0,o=w(),a=m,e.set(t=y),Promise.resolve();if(l.soft){const u=l.soft===!0?.5:+l.soft;h=1/(u*60),c=0}return f||(o=w(),g=!1,f=D(u=>{if(g)return g=!1,f=null,!1;c=Math.min(c+h,1);const k={inv_mass:c,opts:d,settled:!0,dt:(u-o)*60/1e3},O=j(k,a,t,y);return o=u,a=t,e.set(t=O),k.settled&&(f=null),!k.settled})),new Promise(u=>{f.promise.then(()=>{M===p&&u()})})}const d={set:b,update:(m,l)=>b(m(y,t),l),subscribe:e.subscribe,stiffness:i,damping:r,precision:s};return d}function E(t,n){if(t===n||t!==t)return()=>t;const e=typeof t;if(e!==typeof n||Array.isArray(t)!==Array.isArray(n))throw new Error("Cannot interpolate values of different type");if(Array.isArray(t)){const i=n.map((r,s)=>E(t[s],r));return r=>i.map(s=>s(r))}if(e==="object"){if(!t||!n)throw new Error("Object cannot be null");if(A(t)&&A(n)){t=t.getTime(),n=n.getTime();const s=n-t;return o=>new Date(t+o*s)}const i=Object.keys(n),r={};return i.forEach(s=>{r[s]=E(t[s],n[s])}),s=>{const o={};return i.forEach(f=>{o[f]=r[f](s)}),o}}if(e==="number"){const i=n-t;return r=>t+r*i}throw new Error(`Cannot interpolate ${e} values`)}function Y(t,n={}){const e=C(t);let i,r=t;function s(o,f){if(t==null)return e.set(t=o),Promise.resolve();r=o;let p=i,a=!1,{delay:y=0,duration:c=400,easing:h=T,interpolate:g=E}=P(P({},n),f);if(c===0)return p&&(p.abort(),p=null),e.set(t=r),Promise.resolve();const b=w()+y;let d;return i=D(m=>{if(m<b)return!0;a||(d=g(t,o),typeof c=="function"&&(c=c(t,o)),a=!0),p&&(p.abort(),p=null);const l=m-b;return l>c?(e.set(t=o),!1):(e.set(t=d(h(l/c))),!0)}),i.promise}return{set:s,update:(o,f)=>s(o(r,t),f),subscribe:e.subscribe}}export{S as s,Y as t};
